syntax = "proto3";

package meshtastic;

option csharp_namespace = "Meshtastic.Protobufs";
option go_package = "github.com/meshtastic/go/generated";
option java_outer_classname = "InterdeviceProtos";
option java_package = "com.geeksville.mesh";
option swift_prefix = "";

message I2CCommand {
  enum Operation {
    START = 0;
    STOP = 1;
    WRITE = 2;
    READ = 3;
  }
  Operation op = 1;
  uint32 addr = 2;
  uint32 data = 3;
  bool ack = 4;
}

message I2CResponse {
  enum Status {
    OK = 0;
    NACK = 1;
    ERROR = 2;
  }
  Status status = 1;
  uint32 data = 2;
}

// Main message for interdevice communication
message InterdeviceMessage {
  // The message data
  oneof data {
    string nmea = 1;
    I2CCommand i2c_command = 2;
    I2CResponse i2c_response = 3;
    uint32 beep = 4;
  }
}
